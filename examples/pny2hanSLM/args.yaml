# lightning 框架的配置文件
solver_conf:
    devices: [0,1,2,3]
    max_epochs: 300
    precision: "medium"
    strategy: 'ddp'  # dp
    accelerator: "gpu"
    accumulate_grad_batches: 4
    gradient_clip: 1
    train_batch_size: 256
    valid_batch_size: 256
    test_batch_size: 1
    num_workers: 1

save_conf:
    name: "stage_1"
    save_top_k: 10
    every_n_epochs: 1
    save_dir: "save"

inference_conf:
    use_cuda: true
    inference_type: 'greedy_search'# 'greedy_search' 'beam_search' 对inference起作用, 目前beam search非并行，test会很慢
    beam_width: 3  # beam search 搜索宽度
    beam_nbest: 3  # beam search 保留结果，test阶段强制为1
    c_weight: 1  # 长度惩罚系数
    view_nbest: False  # inference 阶段展示nbest个结果


config:  "/ssd/zhuang/code/FunASR/examples/pny2hanSLM/conf/transformer.yaml"
train_data_set_list: "/ssd/zhuang/code/FunASR/examples/pny2hanSLM/data/train_text"
valid_data_set_list: "/ssd/zhuang/code/FunASR/examples/pny2hanSLM/data/dev_text"
test_data_set_list: "/ssd/zhuang/code/FunASR/examples/aishell/DATA/data/test/text"
output_dir: /ssd/zhuang/code/FunASR/examples/pny2hanSLM/
#init_param: "/ssd/zhuang/code/FunASR/examples/ChineseCorrection/save/pny_lm/version_0/checkpoints/epoch=25-val_loss=15.2891-val_asr_acc=0.8877.pt"


